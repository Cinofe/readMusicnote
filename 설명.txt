1. gray scale로 변환하는 이유는 입력된 이미지가 흑백이지만 흑백 값이 RGB를 통해 표현되어있기 때문에 gray scale을 통해 값을 0~255 로 바꿔주기 위해 변환했습니다.

2. 히스토그램을 사용하는 방법에서 이미지가 0,255로만 이루어진게 아니기 때문에 각 x, y의 픽셀값이 임계값(250) 이하로 된 값들을 검정 픽셀이라 판단하여 누적시켰습니다. 여기서 임계값을 250보다 낮게 하면 이진화를 거치지 않았기 때문에 연한 회색같은 오선이 남게 되며 높게 하면 histogram에서 구한 연속된 직선 값이 너무 많이 나오게 됩니다. 

3. 오선 찾기에서 얻은 오선의 라인 시작지점 부터 이미지의 너비의 끝까지 탐색을 진행합니다. 여기서 라인 픽셀의 바로 위 값 (x, y-1)(레포트에서 +라고 적혀있는데 잘 못적었던것 같습니다) 이 임계값(180) 보다 크거나 같으면 그 값을 255로 변환해 주고, 낮으면 본래 값을 그대로 유지 시켜 주었습니다. 여기서 임계값이 180인 이유는 해당 값보다 낮으면 음표 중에 '대' 부분 중 희미한 부분의 값도 같이 255값이 되어 버리고, 높으면 오선 중에 연한 부분이 미처 지워지지 않게 됩니다. 그래서 시행 착오 끝에 가장 적당하다고 판단되는 임계값이 180정도라 생각하고 설정 하였습니다.

4,5,6 부분은 통합했습니다.
(4, 5, 6). 위의 방법대로 진행하면 오선을 제거 할때 바로 위의 픽셀을 검사하게 되는데, 바로 위의 위치가 이전에 오선이었고, 제거 작업을 통해 흰색이 되면 그 밑의 선도 같이 흰색으로 변하게 되어 [자료 8]의 가운데 이미지 처럼 오선과 겹치면서 직선에 근접한 빔 부분이 함께 지워지게 됩니다.  그래서 모폴로지 연산 중 닫힘 연산을 이용하여 그 부분을 보충하게 되는데 그 과정을 설명 하자면 닫힘 연산은 모폴로지 변환의 팽창(dilation)과 침식(erosion)연산의 조합으로 이루어 지게 됩니다. 즉 팽창 연산을 먼저 적용한 뒤 침식 연산을 진행하게 됩니다. 팽창 연산으로 인해 수평, 수직 성분이 줄어들어 사라지게 되고, 수평 수직 성분이 아닌 다른 형태들을 복구하기 위해 침식연산을 수행합니다. 이렇게 해서 나온 이미지가 [자료 9]입니다. 그리고 이 [자료 9]와 [자료 8]의 오선과 함께 사라진 부분이 있는 이미지에 I(x,y) = {M(x,y) | I(x,y) > M(x,y)} 조건을 통해 빈 부분을 채워주게 됩니다. 예를 들어 I(x,y) 위치의 픽셀 값이 255 즉 흰색 값인데 M(x, y)의 값이 0 검정 값이라면 그 부분의 값을 M(x,y)의 값으로 변환 시켜 줍니다. 이렇게 하면 I의 오선부분은 M에서 모폴로지 연산에 의해 수평 성분이 사라졌으므로 둘다 255의 값을 나타내기에 값에 변화가 없지만 오선과 함께 사라진 빔 부분은 M 이미지에서는 값이 0 검정이기 때문에 빈 부분이 채워지게 됩니다. 
